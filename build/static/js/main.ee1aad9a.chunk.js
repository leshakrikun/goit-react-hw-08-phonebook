(this["webpackJsonpgoit-react-hw-08-phonebook"]=this["webpackJsonpgoit-react-hw-08-phonebook"]||[]).push([[0],{26:function(e,t,n){e.exports={login:"views_login__46lQ1",loginForm:"views_loginForm__1Wye1"}},27:function(e,t,n){e.exports={contactItem__btn:"contacts_contactItem__btn__2dpMA",contactList:"contacts_contactList__2P6pN",contactListformat:"contacts_contactListformat__3cFkX",contactListItem:"contacts_contactListItem__3fQh3",contactListText:"contacts_contactListText__3t7ae"}},34:function(e,t,n){e.exports={phoneBookButton:"phonebook_phoneBookButton__2pqfD",formPhoneBook:"phonebook_formPhoneBook__GhRuZ",phonebook:"phonebook_phonebook__erCQK"}},40:function(e,t,n){e.exports={findcontacts:"filter_findcontacts__3xnPs",findInput:"filter_findInput__1Uk2-"}},55:function(e,t,n){e.exports={container:"container_container__2G6Zm"}},91:function(e,t,n){},92:function(e,t,n){},95:function(e,t,n){"use strict";n.r(t);var r=n(0),a=n.n(r),c=n(31),o=n.n(c),s=n(25),i=n(12),l=n(51),u=n.n(l),j=n(24),b=n(8),d=n(2),f=n(13),h=n.n(f),O=n(23),p=n(20),m=n.n(p);m.a.defaults.baseURL="https://connections-api.herokuapp.com";var x,g=Object(i.b)("contacts/createContact",function(){var e=Object(O.a)(h.a.mark((function e(t){var n;return h.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,m.a.post("/contacts",t);case 2:return n=e.sent,console.log(n),console.log(n.data),e.abrupt("return",n.data);case 6:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()),v=Object(i.b)("contacts/getContacts",Object(O.a)(h.a.mark((function e(){var t;return h.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,m.a.get("/contacts");case 2:return t=e.sent,console.log(t),console.log(1,t.data),e.abrupt("return",t.data);case 6:case"end":return e.stop()}}),e)})))),k=Object(i.b)("contacts/deleteContacts",function(){var e=Object(O.a)(h.a.mark((function e(t){var n;return h.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,m.a.delete("/contacts/".concat(t));case 2:return n=e.sent,e.abrupt("return",n.data);case 4:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()),y=Object(i.c)({name:"contacts",initialState:{items:[],loader:!1,error:"",filter:""},reducers:{filterContact:function(e,t){return Object(d.a)(Object(d.a)({},e),{},{filter:t.payload})},deleteFilteredContact:function(e,t){return Object(d.a)(Object(d.a)({},e),{},{filter:Object(s.a)(e.filter.filter((function(e){return e.id!==t.payload})))})}},extraReducers:(x={},Object(b.a)(x,k.pending,(function(e){e.loader=!0})),Object(b.a)(x,k.rejected,(function(e){e.loader=!1,e.error="Error"})),Object(b.a)(x,k.fulfilled,(function(e,t){e.loader=!1,e.error="",e.items=e.items.filter((function(e){return e.id!==t.meta.arg}))})),Object(b.a)(x,g.pending,(function(e,t){e.loader=!0})),Object(b.a)(x,g.rejected,(function(e,t){e.loader=!1,e.error="Error"})),Object(b.a)(x,g.fulfilled,(function(e,t){e.loader=!1,e.error="",e.items=[].concat(Object(s.a)(e.items),[t.payload])})),Object(b.a)(x,v.pending,(function(e){e.loader=!0,e.items=[]})),Object(b.a)(x,v.rejected,(function(e){e.loader=!1,e.error="Error"})),Object(b.a)(x,v.fulfilled,(function(e,t){var n=t.payload;e.loader=!1,e.error="",e.items=[].concat(Object(s.a)(e.items),Object(s.a)(n))})),x)}),C=y.actions,_=C.filterContact,w=C.deleteFilteredContact,L=y.reducer;m.a.defaults.baseURL="https://connections-api.herokuapp.com";var I,B=function(e){m.a.defaults.headers.common.Authorization="Bearer ".concat(e)},F=function(){m.a.defaults.headers.common.Authorization=""},N=Object(i.b)("auth/register",function(){var e=Object(O.a)(h.a.mark((function e(t){var n,r;return h.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,m.a.post("/users/signup",t);case 3:return n=e.sent,r=n.data,B(r.token),e.abrupt("return",r);case 9:e.prev=9,e.t0=e.catch(0);case 11:case"end":return e.stop()}}),e,null,[[0,9]])})));return function(t){return e.apply(this,arguments)}}()),S=Object(i.b)("auth/login",function(){var e=Object(O.a)(h.a.mark((function e(t){var n,r;return h.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,m.a.post("/users/login",t);case 2:return n=e.sent,r=n.data,B(r.token),e.abrupt("return",r);case 6:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()),A={register:N,logOut:Object(i.b)("auth/logout",Object(O.a)(h.a.mark((function e(){return h.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,m.a.post("/users/logout");case 3:F(),e.next=8;break;case 6:e.prev=6,e.t0=e.catch(0);case 8:case"end":return e.stop()}}),e,null,[[0,6]])})))),logIn:S,fetchCurrentUser:Object(i.b)("auth/refresh",function(){var e=Object(O.a)(h.a.mark((function e(t,n){var r,a,c,o;return h.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(r=n.getState(),null!==(a=r.auth.token)){e.next=5;break}return console.log("\u0422\u043e\u043a\u0435\u043d\u0430 \u043d\u0435\u0442, \u0443\u0445\u043e\u0434\u0438\u043c \u0438\u0437 fetchCurrentUser"),e.abrupt("return",n.rejectWithValue());case 5:return B(a),e.prev=6,e.next=9,m.a.get("/users/current");case 9:return c=e.sent,o=c.data,console.log("data23",o),e.abrupt("return",o);case 15:e.prev=15,e.t0=e.catch(6);case 17:case"end":return e.stop()}}),e,null,[[6,15]])})));return function(t,n){return e.apply(this,arguments)}}())},U=Object(i.c)({name:"auth",initialState:{user:{name:null,email:null},token:null,isLoggedIn:!1,isFetchingCurrentUser:!1},extraReducers:(I={},Object(b.a)(I,A.register.fulfilled,(function(e,t){e.user=t.payload.user,e.token=t.payload.token,e.isLoggedIn=!0})),Object(b.a)(I,A.logIn.fulfilled,(function(e,t){e.user=t.payload.user,e.token=t.payload.token,e.isLoggedIn=!0})),Object(b.a)(I,A.logOut.fulfilled,(function(e){e.user={name:null,email:null},e.token=null,e.isLoggedIn=!1})),Object(b.a)(I,A.fetchCurrentUser.pending,(function(e){e.isFetchingCurrentUser=!0})),Object(b.a)(I,A.fetchCurrentUser.fulfilled,(function(e,t){e.user=t.payload,e.isLoggedIn=!0,e.isFetchingCurrentUser=!1})),Object(b.a)(I,A.fetchCurrentUser.rejected,(function(e){e.isFetchingCurrentUser=!1,e.isLoggedIn=!1})),I)}).reducer,E=n(52),T={key:"auth",storage:n.n(E).a,whitelist:["token"]},D={auth:Object(j.g)(T,U),contacts:L},z=[].concat(Object(s.a)(Object(i.d)({serializableCheck:{ignoredActions:[j.a,j.f,j.b,j.c,j.d,j.e]}})),[u.a]),P=Object(i.a)({reducer:D,middleware:z,devTools:!1}),R=Object(j.h)(P),W=n(53),Z=n(21),q=n(6),J=n(9),M=n(55),Q=n.n(M),G=n(1);function K(e){var t=e.children;return Object(G.jsx)("div",{className:Q.a.container,children:t})}var V=n(3),X=function(e){return e.auth.isLoggedIn},$=function(e){return e.auth.user.email},H=function(e){return e.auth.isFetchingCurrentUser},Y=["children","redirectTo"];function ee(e){var t=e.children,n=e.redirectTo,r=void 0===n?"/":n,a=Object(V.a)(e,Y),c=Object(q.c)(X);return Object(G.jsx)(J.b,Object(d.a)(Object(d.a)({},a),{},{children:c?t:Object(G.jsx)(J.a,{to:r})}))}var te=["children","restricted","redirectTo"];function ne(e){var t=e.children,n=e.restricted,r=void 0!==n&&n,a=e.redirectTo,c=void 0===a?"/":a,o=Object(V.a)(e,te),s=Object(q.c)(X)&&r;return Object(G.jsx)(J.b,Object(d.a)(Object(d.a)({},o),{},{children:s?Object(G.jsx)(J.a,{to:c}):t}))}var re={link:{display:"inline-block",textDecoration:"none",padding:12,fontWeight:700,color:"#2A363B"},activeLink:{color:"#E84A5F"}},ae=function(){return Object(G.jsx)("nav",{children:Object(G.jsx)(Z.b,{to:"/contacts",exact:!0,style:re.link,activeStyle:re.activeLink,children:"\u0422\u0435\u043b\u0435\u0444\u043e\u043d\u043d\u0430\u044f \u043a\u043d\u0438\u0433\u0430"})})},ce=n(22),oe={container:{display:"flex",alignItems:"center"},name:{fontWeight:700,marginRight:12}};function se(){var e=Object(q.b)(),t=Object(q.c)($);return Object(r.useEffect)((function(){e(v())}),[e]),Object(G.jsxs)("div",{style:oe.container,children:[Object(G.jsxs)("span",{style:oe.name,children:["Email: ",t]}),Object(G.jsx)(ce.a,{type:"button",variant:"secondary",onClick:function(){return e(A.logOut())},children:"\u0412\u044b\u0439\u0442\u0438"})]})}var ie={link:{display:"inline-block",textDecoration:"none",padding:12,fontWeight:700,color:"#2A363B"},activeLink:{color:"#E84A5F"}};function le(){return Object(G.jsxs)("div",{children:[Object(G.jsx)(Z.b,{to:"/register",exact:!0,style:ie.link,activeStyle:ie.activeLink,children:"\u0420\u0435\u0433\u0438\u0441\u0442\u0440\u0430\u0446\u0438\u044f"}),Object(G.jsx)(Z.b,{to:"/login",exact:!0,style:ie.link,activeStyle:ie.activeLink,children:"\u041b\u043e\u0433\u0438\u043d"})]})}var ue={header:{display:"flex",justifyContent:"space-between",alignItems:"center",borderBottom:"1px solid #2A363B"}};function je(){var e=Object(q.c)(X);return Object(G.jsxs)("header",{style:ue.header,children:[Object(G.jsx)(ae,{}),e?Object(G.jsx)(se,{}):Object(G.jsx)(le,{})]})}var be=n(11),de=n(97),fe=function(e,t){if(t){var n=t.toLowerCase();return e.filter((function(e){return e.name.toLowerCase().includes(n)}))}return e.contacts},he=function(e){return fe(e)},Oe=n(10),pe=n(34),me=n.n(pe),xe=function(){var e=Object(q.b)(),t=Object(q.c)((function(e){return he(e)})),n=Object(r.useState)(""),a=Object(be.a)(n,2),c=a[0],o=a[1],s=Object(r.useState)(""),i=Object(be.a)(s,2),l=i[0],u=i[1],j=t.items,b=function(e){var t=e.target,n=t.name,r=t.value;switch(n){case"name":o(r);break;case"number":u(r);break;default:return}};return Object(G.jsxs)("div",{className:me.a.phonebook,children:[Object(G.jsx)("h2",{children:"Phonebook"}),Object(G.jsxs)("div",{className:me.a.formPhoneBook,children:[Object(G.jsx)("p",{children:"Name"}),Object(G.jsxs)(Oe.a,{onSubmit:function(t){t.preventDefault(),j.find((function(e){return c===e.name}))?alert(c+" is already in contact"):e(g({name:c,number:l,id:Object(de.a)()})),o(""),u("")},children:[Object(G.jsx)(Oe.a.Control,{type:"text",onChange:b,name:"name",value:c,pattern:"^[a-zA-Z\u0430-\u044f\u0410-\u042f]+(([' -][a-zA-Z\u0430-\u044f\u0410-\u042f ])?[a-zA-Z\u0430-\u044f\u0410-\u042f]*)*$",title:"\u0418\u043c\u044f \u043c\u043e\u0436\u0435\u0442 \u0441\u043e\u0441\u0442\u043e\u044f\u0442\u044c \u0442\u043e\u043b\u044c\u043a\u043e \u0438\u0437 \u0431\u0443\u043a\u0432, \u0430\u043f\u043e\u0441\u0442\u0440\u043e\u0444\u0430, \u0442\u0438\u0440\u0435 \u0438 \u043f\u0440\u043e\u0431\u0435\u043b\u043e\u0432. \u041d\u0430\u043f\u0440\u0438\u043c\u0435\u0440 Adrian, Jacob Mercer, Charles de Batz de Castelmore d'Artagnan \u0438 \u0442. \u043f.",required:!0}),Object(G.jsx)("p",{children:"Number"}),Object(G.jsx)(Oe.a.Control,{type:"tel",name:"number",onChange:b,value:l,pattern:"\\+?\\d{1,4}?[-.\\s]?\\(?\\d{1,3}?\\)?[-.\\s]?\\d{1,4}[-.\\s]?\\d{1,4}[-.\\s]?\\d{1,9}",title:"\u041d\u043e\u043c\u0435\u0440 \u0442\u0435\u043b\u0435\u0444\u043e\u043d\u0430 \u0434\u043e\u043b\u0436\u0435\u043d \u0441\u043e\u0441\u0442\u043e\u044f\u0442\u044c \u0446\u0438\u0444\u0440 \u0438 \u043c\u043e\u0436\u0435\u0442 \u0441\u043e\u0434\u0435\u0440\u0436\u0430\u0442\u044c \u043f\u0440\u043e\u0431\u0435\u043b\u044b, \u0442\u0438\u0440\u0435, \u043a\u0440\u0443\u0433\u043b\u044b\u0435 \u0441\u043a\u043e\u0431\u043a\u0438 \u0438 \u043c\u043e\u0436\u0435\u0442 \u043d\u0430\u0447\u0438\u043d\u0430\u0442\u044c\u0441\u044f \u0441 +",required:!0}),Object(G.jsx)(ce.a,{variant:"info",type:"submit",className:me.a.phoneBookButton,children:"Add contact"})]})]})]})},ge=n(41),ve=n(27),ke=n.n(ve),ye="",Ce=function(){var e=Object(q.b)(),t=Object(q.c)((function(e){return he(e)})),n=Array.isArray(t.filter);t.items&&(ye=t.items),n&&(ye=t.filter);return Object(G.jsxs)(G.Fragment,{children:[t.loader&&Object(G.jsx)("h2",{children:"\u0418\u0434\u0435\u0442 \u0437\u0430\u0433\u0440\u0443\u0437\u043a\u0430"}),ye.length>0&&Object(G.jsx)("div",{className:ke.a.contactListformat,children:Object(G.jsx)(ge.a,{as:"ul",variant:"flush",className:ke.a.contactList,children:ye.map((function(t){var r=t.id,a=t.name,c=t.number;return Object(G.jsxs)(ge.a.Item,{as:"li",variant:"info",className:ke.a.contactListItem,children:[Object(G.jsxs)("p",{className:ke.a.contactListText,children:[a,": ",c]}),Object(G.jsx)(ce.a,{type:"button",variant:"danger",className:ke.a.contactItem__btn,onClick:function(){return function(t){n&&e(w(t)),e(k(t))}(r)},children:"\u0423\u0434\u0430\u043b\u0438\u0442\u044c"})]},r)}))})})]})},_e=n(40),we=n.n(_e),Le=function(){var e=Object(q.b)(),t=Object(q.c)((function(e){return function(e){return e.contacts.items}(e)}));return Object(G.jsxs)(G.Fragment,{children:[Object(G.jsx)("h2",{children:"Contacts"}),Object(G.jsxs)(Oe.a,{className:we.a.findcontacts,children:["Find contacts by name",Object(G.jsx)(Oe.a.Control,{className:we.a.findInput,type:"text",name:"filter",onChange:function(n){var r=n.target.value,a=fe(t,r);e(_(a))}})]})]})},Ie=n(26),Be=n.n(Ie),Fe={form:{width:320},label:{display:"flex",flexDirection:"column",marginBottom:15}};function Ne(){var e=Object(q.b)(),t=Object(r.useState)(""),n=Object(be.a)(t,2),a=n[0],c=n[1],o=Object(r.useState)(""),s=Object(be.a)(o,2),i=s[0],l=s[1],u=Object(r.useState)(""),j=Object(be.a)(u,2),b=j[0],d=j[1],f=function(e){var t=e.target,n=t.name,r=t.value;switch(n){case"name":return c(r);case"email":return l(r);case"password":return d(r);default:return}};return Object(G.jsxs)("div",{children:[Object(G.jsx)("h1",{className:Be.a.login,children:"\u0417\u0430\u0440\u0435\u0433\u0438\u0441\u0442\u0440\u0438\u0440\u0443\u0439\u0442\u0435\u0441\u044c \u0434\u043b\u044f \u0438\u0441\u043f\u043e\u043b\u044c\u0437\u043e\u0432\u0430\u043d\u0438\u044f \u0441\u0435\u0440\u0432\u0438\u0441\u0430"}),Object(G.jsxs)(Oe.a,{onSubmit:function(t){t.preventDefault(),e(A.register({name:a,email:i,password:b})),c(""),l(""),d("")},style:Fe.form,className:Be.a.loginForm,autoComplete:"off",children:[Object(G.jsxs)(Oe.a.Label,{style:Fe.label,children:["\u0418\u043c\u044f",Object(G.jsx)(Oe.a.Control,{type:"text",name:"name",value:a,onChange:f,placeholder:"Enter name"})]}),Object(G.jsxs)(Oe.a.Label,{style:Fe.label,children:["\u041f\u043e\u0447\u0442\u0430",Object(G.jsx)(Oe.a.Control,{type:"email",name:"email",value:i,placeholder:"Enter email",onChange:f})]}),Object(G.jsxs)(Oe.a.Label,{style:Fe.label,children:["\u041f\u0430\u0440\u043e\u043b\u044c",Object(G.jsx)(Oe.a.Control,{type:"password",name:"password",value:b,placeholder:"Enter password",onChange:f})]}),Object(G.jsx)(ce.a,{variant:"success",type:"submit",children:"\u0417\u0430\u0440\u0435\u0433\u0438\u0441\u0442\u0440\u0438\u0440\u043e\u0432\u0430\u0442\u044c\u0441\u044f"})]})]})}var Se={form:{width:320},label:{display:"flex",flexDirection:"column",marginBottom:15}};function Ae(){var e=Object(q.b)(),t=Object(r.useState)(""),n=Object(be.a)(t,2),a=n[0],c=n[1],o=Object(r.useState)(""),s=Object(be.a)(o,2),i=s[0],l=s[1],u=function(e){var t=e.target,n=t.name,r=t.value;switch(n){case"email":return c(r);case"password":return l(r);default:return}};return Object(G.jsxs)("div",{children:[Object(G.jsx)("h1",{className:Be.a.login,children:"\u0412\u043e\u0439\u0434\u0438\u0442\u0435 \u0434\u043b\u044f \u0438\u0441\u043f\u043e\u043b\u044c\u0437\u043e\u0432\u0430\u043d\u0438\u044f \u0441\u0435\u0440\u0432\u0438\u0441\u0430"}),Object(G.jsxs)(Oe.a,{onSubmit:function(t){t.preventDefault(),e(A.logIn({email:a,password:i})),e(v()),c(""),l("")},style:Se.form,className:Be.a.loginForm,autoComplete:"off",children:[Object(G.jsxs)(Oe.a.Label,{style:Se.label,children:["\u041f\u043e\u0447\u0442\u0430",Object(G.jsx)(Oe.a.Control,{type:"email",name:"email",value:a,placeholder:"Enter email",onChange:u})]}),Object(G.jsxs)(Oe.a.Label,{style:Se.label,children:["\u041f\u0430\u0440\u043e\u043b\u044c",Object(G.jsx)(Oe.a.Control,{type:"password",name:"password",value:i,placeholder:"Password",onChange:u})]}),Object(G.jsx)(ce.a,{variant:"success",type:"submit",children:"\u0412\u043e\u0439\u0442\u0438"})]})]})}n(91);function Ue(){var e=Object(q.b)(),t=Object(q.c)(H);return Object(r.useEffect)((function(){e(A.fetchCurrentUser())}),[e]),Object(G.jsx)(K,{children:t?Object(G.jsx)("h1",{children:"\u0417\u0430\u0433\u0440\u0443\u0437\u043a\u0430"}):Object(G.jsxs)(G.Fragment,{children:[Object(G.jsx)(je,{}),Object(G.jsx)(J.d,{children:Object(G.jsxs)(r.Suspense,{fallback:Object(G.jsx)("p",{children:"\u0417\u0430\u0433\u0440\u0443\u0436\u0430\u0435\u043c..."}),children:[Object(G.jsx)(ne,{exact:!0,path:"/register",restricted:!0,children:Object(G.jsx)(Ne,{})}),Object(G.jsx)(ne,{exact:!0,path:"/login",redirectTo:"/contacts",restricted:!0,children:Object(G.jsx)(Ae,{})}),Object(G.jsxs)(ee,{path:"/contacts",redirectTo:"/login",children:[Object(G.jsx)(xe,{}),Object(G.jsx)(Le,{}),Object(G.jsx)(Ce,{})]})]})})]})})}n(92),n(93),n(94);o.a.render(Object(G.jsx)(a.a.StrictMode,{children:Object(G.jsx)(q.a,{store:P,children:Object(G.jsx)(W.a,{loading:null,persistor:R,children:Object(G.jsx)(Z.a,{children:Object(G.jsx)(Ue,{})})})})}),document.getElementById("root"))}},[[95,1,2]]]);
//# sourceMappingURL=main.ee1aad9a.chunk.js.map